{"swagger":"2.0","info":{"version":"1.0.0","title":"koa-oai-mongoose example"},"consumes":["application/json"],"produces":["application/json"],"basePath":"/api","paths":{"/user/auth":{"post":{"tags":["user"],"description":"find a luck user","x-oai-controller":[{"file":"user","handler":"auth"}],"parameters":[{"data":"data","in":"body","type":"object","required":true}],"responses":{"200":{"description":"user login"}}}},"/app-data/user":{"post":{"summary":"Create user(s)","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"in":"body","name":"data","type":"object","schema":{"type":"array","items":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"required":true}],"responses":{"200":{"schema":{"type":"array","items":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"get":{"summary":"Find user(s)","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"skip","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"limit","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"sort","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"type":"array","items":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"delete":{"summary":"Delete user(s)","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":true}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"put":{"summary":"Update user(s)","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false,"description":"Support all mongo where filter."},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/user/page":{"get":{"summary":"Page user","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"page","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"size","type":"number","format":"int32","in":"query","required":false,"default":10},{"name":"sort","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"type":"object","required":["items"],"properties":{"pageCount":{"type":"number","description":"total page count."},"page":{"type":"number","description":"current page index."},"size":{"type":"number","description":"page size count."},"total":{"type":"number","description":"total items count."},"items":{"type":"array","items":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/user/count":{"get":{"summary":"Count user","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"title":"countSchema","type":"object","properties":{"count":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/user/drop":{"delete":{"summary":"Drop user database, dangerous!","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[],"responses":{"200":{"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/user/findOne":{"get":{"summary":"Find user","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/user/findOneAndUpdate":{"put":{"summary":"Update user","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false,"description":"Support all mongo where filter."},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/user/{id}":{"delete":{"summary":"Delete user by id","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"id","type":"string","in":"path","required":true}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"get":{"summary":"Find user by id","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"id","type":"string","in":"path","required":true},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"type":"array","items":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"put":{"summary":"Update user by id","tags":["app-data.user"],"x-oai-controller":[{}],"parameters":[{"name":"id","type":"string","in":"path","required":true},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"passwordHash":{"type":"string"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2017-05-24T03:28:03.159Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/book":{"post":{"summary":"Create book(s)","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"in":"body","name":"data","type":"object","schema":{"type":"array","items":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"required":true}],"responses":{"200":{"schema":{"type":"array","items":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"get":{"summary":"Find book(s)","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"skip","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"limit","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"sort","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"type":"array","items":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"delete":{"summary":"Delete book(s)","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":true}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"put":{"summary":"Update book(s)","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false,"description":"Support all mongo where filter."},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/book/page":{"get":{"summary":"Page book","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"page","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"size","type":"number","format":"int32","in":"query","required":false,"default":10},{"name":"sort","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"type":"object","required":["items"],"properties":{"pageCount":{"type":"number","description":"total page count."},"page":{"type":"number","description":"current page index."},"size":{"type":"number","description":"page size count."},"total":{"type":"number","description":"total items count."},"items":{"type":"array","items":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/book/count":{"get":{"summary":"Count book","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"title":"countSchema","type":"object","properties":{"count":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/book/drop":{"delete":{"summary":"Drop book database, dangerous!","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[],"responses":{"200":{"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/book/findOne":{"get":{"summary":"Find book","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/book/findOneAndUpdate":{"put":{"summary":"Update book","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false,"description":"Support all mongo where filter."},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/app-data/book/{id}":{"delete":{"summary":"Delete book by id","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"id","type":"string","in":"path","required":true}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"get":{"summary":"Find book by id","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"id","type":"string","in":"path","required":true},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"type":"array","items":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"put":{"summary":"Update book by id","tags":["app-data.book"],"x-oai-controller":[{}],"parameters":[{"name":"id","type":"string","in":"path","required":true},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"},"ownerId":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}}}}